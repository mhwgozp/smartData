<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SmartData</title>

	<!-- Global stylesheets -->
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700,900" rel="stylesheet" type="text/css">
	<link href="/static/assets/css/icons/icomoon/styles.css" rel="stylesheet" type="text/css">
	<link href="/static/assets/css/minified/bootstrap.min.css" rel="stylesheet" type="text/css">
	<link href="/static/assets/css/minified/core.min.css" rel="stylesheet" type="text/css">
	<link href="/static/assets/css/minified/components.min.css" rel="stylesheet" type="text/css">
	<link href="/static/assets/css/minified/colors.min.css" rel="stylesheet" type="text/css">
	<link href="/static/dtree/dtree.css" rel="StyleSheet" type="text/css">
	<!-- /global stylesheets -->

	<!-- Core JS files -->
	<script type="text/javascript" src="/static/assets/js/plugins/loaders/pace.min.js"></script>
	<script type="text/javascript" src="/static/assets/js/core/libraries/jquery.min.js"></script>
	<script type="text/javascript" src="/static/assets/js/core/libraries/bootstrap.min.js"></script>
	<script type="text/javascript" src="/static/assets/js/plugins/loaders/blockui.min.js"></script>

	<!-- /core JS files -->

	<!-- Theme JS files -->
	<!--script type="text/javascript" src="/static/assets/js/plugins/forms/styling/switchery.min.js"></script-->
	<script type="text/javascript" src="/static/assets/js/plugins/forms/selects/select2.min.js"></script>
	<script type="text/javascript" src="/static/assets/js/plugins/ui/prism.min.js"></script>

	<script type="text/javascript" src="/static/assets/js/core/app.js"></script>
	<script type="text/javascript" src="/static/assets/js/pages/sidebar_dual.js"></script>
	<script type="text/javascript" src="/static/echarts/dist/echarts.min.js"></script>
	<script type="text/javascript" src="/static/dtree/dtree.js"></script>
	<!-- /theme JS files -->

</head>

<body class="sidebar-xs">

	<!-- Main navbar -->
	<div class="navbar navbar-default header-highlight">
		<div class="navbar-header">
			<a class="navbar-brand" href="index.html"><img src="/static/assets/images/logo_light.png" alt=""></a>

			<ul class="nav navbar-nav pull-right visible-xs-block">
				<li><a data-toggle="collapse" data-target="#navbar-mobile"><i class="icon-tree5"></i></a></li>
				<li><a class="sidebar-mobile-main-toggle"><i class="icon-paragraph-justify3"></i></a></li>
				<li><a class="sidebar-mobile-opposite-toggle"><i class="icon-menu"></i></a></li>
			</ul>
		</div>

		<div class="navbar-collapse collapse" id="navbar-mobile">
			<ul class="nav navbar-nav">
				<li>
					<a class="sidebar-control sidebar-main-hide hidden-xs" data-popup="tooltip" title="Hide main" data-placement="bottom" data-container="body">
						<i class="icon-paragraph-justify3"></i>
					</a>
				</li>
				
				<li>
					<a class="sidebar-control sidebar-opposite-fix hidden-xs" data-popup="tooltip" title="Opposite - fix main" data-placement="bottom" data-container="body">
						<i class="icon-lan3"></i>
					</a>
				</li>

				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown">
						<i class="icon-git-compare"></i>
						<span class="visible-xs-inline-block position-right">Git updates</span>
						<span class="badge bg-warning-400">9</span>
					</a>
					
					<div class="dropdown-menu dropdown-content">
						<div class="dropdown-content-heading">
							Git updates
							<ul class="icons-list">
								<li><a href="#"><i class="icon-sync"></i></a></li>
							</ul>
						</div>

						<ul class="media-list dropdown-content-body width-350">
							<li class="media">
								<div class="media-left">
									<a href="#" class="btn border-primary text-primary btn-flat btn-rounded btn-icon btn-sm"><i class="icon-git-pull-request"></i></a>
								</div>

								<div class="media-body">
									Drop the IE <a href="#">specific hacks</a> for temporal inputs
									<div class="media-annotation">4 minutes ago</div>
								</div>
							</li>

							<li class="media">
								<div class="media-left">
									<a href="#" class="btn border-warning text-warning btn-flat btn-rounded btn-icon btn-sm"><i class="icon-git-commit"></i></a>
								</div>
								
								<div class="media-body">
									Add full font overrides for popovers and tooltips
									<div class="media-annotation">36 minutes ago</div>
								</div>
							</li>

							<li class="media">
								<div class="media-left">
									<a href="#" class="btn border-info text-info btn-flat btn-rounded btn-icon btn-sm"><i class="icon-git-branch"></i></a>
								</div>
								
								<div class="media-body">
									<a href="#">Chris Arney</a> created a new <span class="text-semibold">Design</span> branch
									<div class="media-annotation">2 hours ago</div>
								</div>
							</li>

							<li class="media">
								<div class="media-left">
									<a href="#" class="btn border-success text-success btn-flat btn-rounded btn-icon btn-sm"><i class="icon-git-merge"></i></a>
								</div>
								
								<div class="media-body">
									<a href="#">Eugene Kopyov</a> merged <span class="text-semibold">Master</span> and <span class="text-semibold">Dev</span> branches
									<div class="media-annotation">Dec 18, 18:36</div>
								</div>
							</li>

							<li class="media">
								<div class="media-left">
									<a href="#" class="btn border-primary text-primary btn-flat btn-rounded btn-icon btn-sm"><i class="icon-git-pull-request"></i></a>
								</div>
								
								<div class="media-body">
									Have Carousel ignore keyboard events
									<div class="media-annotation">Dec 12, 05:46</div>
								</div>
							</li>
						</ul>

						<div class="dropdown-content-footer">
							<a href="#" data-popup="tooltip" title="All activity"><i class="icon-menu display-block"></i></a>
						</div>
					</div>
				</li>
			</ul>

			<p class="navbar-text">
				<span class="label bg-success">Online</span>
			</p>

			<div class="navbar-right">
				<ul class="nav navbar-nav">
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							<i class="icon-people"></i>
							<span class="visible-xs-inline-block position-right">Users</span>
						</a>
						
						<div class="dropdown-menu dropdown-content">
							<div class="dropdown-content-heading">
								Users online
								<ul class="icons-list">
									<li><a href="#"><i class="icon-gear"></i></a></li>
								</ul>
							</div>

							<ul class="media-list dropdown-content-body width-300">
								<li class="media">
									<div class="media-left"><img src="/static/assets/images/placeholder.jpg" class="img-circle img-sm" alt=""></div>
									<div class="media-body">
										<a href="#" class="media-heading text-semibold">DOWNLOADED FROM THEMELOCK.COM</a>
										<span class="display-block text-muted text-size-small">Lead web developer</span>
									</div>
									<div class="media-right media-middle"><span class="status-mark border-success"></span></div>
								</li>

								<li class="media">
									<div class="media-left"><img src="/static/assets/images/placeholder.jpg" class="img-circle img-sm" alt=""></div>
									<div class="media-body">
										<a href="#" class="media-heading text-semibold">Will Brason</a>
										<span class="display-block text-muted text-size-small">Marketing manager</span>
									</div>
									<div class="media-right media-middle"><span class="status-mark border-danger"></span></div>
								</li>

								<li class="media">
									<div class="media-left"><img src="/static/assets/images/placeholder.jpg" class="img-circle img-sm" alt=""></div>
									<div class="media-body">
										<a href="#" class="media-heading text-semibold">Hanna Walden</a>
										<span class="display-block text-muted text-size-small">Project manager</span>
									</div>
									<div class="media-right media-middle"><span class="status-mark border-success"></span></div>
								</li>

								<li class="media">
									<div class="media-left"><img src="/static/assets/images/placeholder.jpg" class="img-circle img-sm" alt=""></div>
									<div class="media-body">
										<a href="#" class="media-heading text-semibold">Dori Laperriere</a>
										<span class="display-block text-muted text-size-small">Business developer</span>
									</div>
									<div class="media-right media-middle"><span class="status-mark border-warning-300"></span></div>
								</li>

								<li class="media">
									<div class="media-left"><img src="/static/assets/images/placeholder.jpg" class="img-circle img-sm" alt=""></div>
									<div class="media-body">
										<a href="#" class="media-heading text-semibold">Vanessa Aurelius</a>
										<span class="display-block text-muted text-size-small">UX expert</span>
									</div>
									<div class="media-right media-middle"><span class="status-mark border-grey-400"></span></div>
								</li>
							</ul>

							<div class="dropdown-content-footer">
								<a href="#" data-popup="tooltip" title="All users"><i class="icon-menu display-block"></i></a>
							</div>
						</div>
					</li>

					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							<i class="icon-bubbles4"></i>
							<span class="visible-xs-inline-block position-right">Messages</span>
							<span class="badge bg-warning-400">2</span>
						</a>
						
						<div class="dropdown-menu dropdown-content width-350">
							<div class="dropdown-content-heading">
								Messages
								<ul class="icons-list">
									<li><a href="#"><i class="icon-compose"></i></a></li>
								</ul>
							</div>

							<ul class="media-list dropdown-content-body">
								<li class="media">
									<div class="media-left">
										<img src="/static/assets/images/placeholder.jpg" class="img-circle img-sm" alt="">
										<span class="badge bg-danger-400 media-badge">5</span>
									</div>

									<div class="media-body">
										<a href="#" class="media-heading">
											<span class="text-semibold">James Alexander</span>
											<span class="media-annotation pull-right">04:58</span>
										</a>

										<span class="text-muted">who knows, maybe that would be the best thing for me...</span>
									</div>
								</li>

								<li class="media">
									<div class="media-left">
										<img src="/static/assets/images/placeholder.jpg" class="img-circle img-sm" alt="">
										<span class="badge bg-danger-400 media-badge">4</span>
									</div>

									<div class="media-body">
										<a href="#" class="media-heading">
											<span class="text-semibold">Margo Baker</span>
											<span class="media-annotation pull-right">12:16</span>
										</a>

										<span class="text-muted">That was something he was unable to do because...</span>
									</div>
								</li>

								<li class="media">
									<div class="media-left"><img src="/static/assets/images/placeholder.jpg" class="img-circle img-sm" alt=""></div>
									<div class="media-body">
										<a href="#" class="media-heading">
											<span class="text-semibold">Jeremy Victorino</span>
											<span class="media-annotation pull-right">22:48</span>
										</a>

										<span class="text-muted">But that would be extremely strained and suspicious...</span>
									</div>
								</li>

								<li class="media">
									<div class="media-left"><img src="/static/assets/images/placeholder.jpg" class="img-circle img-sm" alt=""></div>
									<div class="media-body">
										<a href="#" class="media-heading">
											<span class="text-semibold">Beatrix Diaz</span>
											<span class="media-annotation pull-right">Tue</span>
										</a>

										<span class="text-muted">What a strenuous career it is that I've chosen...</span>
									</div>
								</li>

								<li class="media">
									<div class="media-left"><img src="/static/assets/images/placeholder.jpg" class="img-circle img-sm" alt=""></div>
									<div class="media-body">
										<a href="#" class="media-heading">
											<span class="text-semibold">Richard Vango</span>
											<span class="media-annotation pull-right">Mon</span>
										</a>
										
										<span class="text-muted">Other travelling salesmen live a life of luxury...</span>
									</div>
								</li>
							</ul>

							<div class="dropdown-content-footer">
								<a href="#" data-popup="tooltip" title="All messages"><i class="icon-menu display-block"></i></a>
							</div>
						</div>
					</li>

					<li class="dropdown dropdown-user">
						<a class="dropdown-toggle" data-toggle="dropdown">
							<img src="/static/assets/images/placeholder.jpg" alt="">
							<span>Victoria</span>
							<i class="caret"></i>
						</a>

						<ul class="dropdown-menu dropdown-menu-right">
							<li><a href="#"><i class="icon-user-plus"></i> My profile</a></li>
							<li><a href="#"><i class="icon-coins"></i> My balance</a></li>
							<li><a href="#"><span class="badge bg-blue pull-right">58</span> <i class="icon-comment-discussion"></i> Messages</a></li>
							<li class="divider"></li>
							<li><a href="#"><i class="icon-cog5"></i> Account settings</a></li>
							<li><a href="#"><i class="icon-switch2"></i> Logout</a></li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<!-- /main navbar -->


	<!-- Page container -->
	<div class="page-container">

		<!-- Page content -->
		<div class="page-content">

			<!-- Main sidebar -->
			<div class="sidebar sidebar-main">
				<div class="sidebar-content">
					<!-- Main navigation -->
					<script type="text/javascript" src="/static/common/mainSidebar.js"></script>
					<!-- /main navigation -->

				</div>
			</div>
			<!-- /main sidebar -->


			<!-- Main content -->
			<div class="content-wrapper">

				<!-- Content area -->
				<div class="content">
					<div class="row">
						<div class="col-md-12">
							<div class="panel panel-flat">
<!--								<div class="panel-heading">-->
<!--									<h6 class="panel-title">K线图</h6>-->
<!--								</div>-->

								<div class="panel-body">
									<!-- Stock Search -->
									<div class="form-group">
										<div class="row">
											<div class="col-lg-12">
												<div class="col-md-3">
													<input id="startDate" class="form-control" type="date" name="date">
													<span class="help-block">Start Date</span>
												</div>

												<div class="col-md-3">
													<input id="endDate" class="form-control" type="date" name="date">
													<span class="help-block">End Date</span>
												</div>

												<div class="col-md-2">
													<div class="form-group has-feedback">
														<input id="stockCode" type="text" class="form-control" list="stockCodeList" placeholder="Stock Code" onchange="addCode()" onfocus=this.value=''>
															<datalist id="stockCodeList" style="display:none;" >
															   <option value="300059.SZ">东方财富</option>
															   <option value="600519.SH">贵州茅台</option>
														   </datalist>
														<div class="form-control-feedback">
															<i class="icon-search4 text-size-base"></i>
														</div>
													</div>
												</div>

												<div class="col-md-2">
													<div class="form-group has-feedback">
														<input id="indexCode" type="text" class="form-control" placeholder="Index Code">
														<div class="form-control-feedback">
															<i class="icon-search4 text-size-base"></i>
														</div>
													</div>
												</div>

												<div class="col-md-2">
													<button type="button" class="btn btn-default" id="analyse">Analyse</button>
												</div>

											</div>
										</div>
									</div>
									<!-- /Stock Search  -->

									<!-- Candlestick charts -->
									<div class="row" id="main_echart_container">
										<div class="col-lg-12">

											<!-- Candlestick with line -->
											<div class="panel panel-flat">
												<div class="panel-body">
													<div class="chart-container">
															<div class="chart has-fixed-height" id="candlestick_line"></div>
													</div>
												</div>
											</div>
											<!-- /candlestick with line -->

										</div>
									</div>
									<!-- /Candlestick charts -->
								</div>
							</div>
						</div>
					</div>

					<!-- Footer -->
					<div class="footer text-muted" style="font-family:'Microsoft Yahei';">
						&copy; 2020  SmartData公司&nbsp;&nbsp;ICP备XXXXXXXX号&nbsp;&nbsp;技术支持：<a style="font-family:'Microsoft Yahei';" href="http://www.jsdaima.com/" title="js代码" target="_blank">js代码</a>
					</div>
					<!-- /footer -->

				</div>
				<!-- /content area -->

			</div>
			<!-- /main content -->


			<!-- Opposite sidebar -->
			<div class="sidebar sidebar-opposite sidebar-default">
				<div class="sidebar-content">

					<div class="dtree" id="dtree_div">
						<p><a href="javascript:  d.closeAll();">open</a> | <a href="javascript: d.openAll();">close</a></p>
						<input id="dosearch_text" type="text" />
						<input id="dosearch" type="button" value="search" onclick="nodeSearching()"/>
						<script type="text/javascript">
							d = new dTree('d', true); //参数1：树名， 参数二：true 多选 false单选
							//d.add(NodeId, FatherId, Checkbox Name, Checkbox Value, Checkbox Dispaly Name,
							//      true/false:Checkbox不可选/可选, true/flase:Checkbox默认选中/没选中
							d.add(0, -1, 'Compare Multi selection');
							d.add(10, 0, 'MacroParams', 'macro', '宏观数据', true, false,true);
							d.add(100, 10, 'MacroParams', 'macroGdp', 'GDP', false, false);
							d.add(101, 10, 'MacroParams', 'macroMondySupply', '货币供应量', false, false);
							d.add(102, 10, 'MacroParams', 'macroCPI', 'CPI', false, false);
							d.add(103, 10, 'MacroParams', 'macroLPR', 'LPR贷款基础利率', false, false);

							d.add(20, 0, 'FinancialIndexParams', '0006', '财务指标数据', true, false,true);
							d.add(200, 20, 'FinancialIndexParams', 'eps', '基本每股收益', false, false);
							d.add(201, 20, 'FinancialIndexParams', 'dt_eps', '稀释每股收益', false, false);
							d.add(202, 20, 'FinancialIndexParams', 'total_revenue_ps', '每股营业总收入', false, false);
							d.add(203, 20, 'FinancialIndexParams', 'revenue_ps', '每股营业收入', false, false);
							d.add(204, 20, 'FinancialIndexParams', 'capital_rese_ps', '每股资本公积', false, false);
							d.add(205, 20, 'FinancialIndexParams', 'surplus_rese_ps', '每股盈余公积', false, false);
							d.add(206, 20, 'FinancialIndexParams', 'undist_profit_ps', '每股未分配利润', false, false);
							d.add(207, 20, 'FinancialIndexParams', 'extra_item', '非经常性损益', false, false);
							d.add(208, 20, 'FinancialIndexParams', 'profit_dedt', '扣除非经常性损益后的净利润', false, false);
							d.add(209, 20, 'FinancialIndexParams', 'gross_margin', '毛利', false, false);
							d.add(210, 20, 'FinancialIndexParams', 'current_ratio', '流动比率', false, false);
							d.add(211, 20, 'FinancialIndexParams', 'quick_ratio', '速动比率', false, false);
							d.add(212, 20, 'FinancialIndexParams', 'cash_ratio', '保守速动比率', false, false);
							d.add(213, 20, 'FinancialIndexParams', 'invturn_days', '存货周转天数', false, false);
							d.add(214, 20, 'FinancialIndexParams', 'arturn_days', '应收账款周转天数', false, false);
							d.add(215, 20, 'FinancialIndexParams', 'inv_turn', '存货周转率', false, false);
							d.add(216, 20, 'FinancialIndexParams', 'ar_turn', '应收账款周转率', false, false);
							d.add(217, 20, 'FinancialIndexParams', 'ca_turn', '流动资产周转率', false, false);
							d.add(218, 20, 'FinancialIndexParams', 'fa_turn', '固定资产周转率', false, false);
							d.add(219, 20, 'FinancialIndexParams', 'assets_turn', '总资产周转率', false, false);
							d.add(220, 20, 'FinancialIndexParams', 'op_income', '经营活动净收益', false, false);
							d.add(221, 20, 'FinancialIndexParams', 'valuechange_income', '价值变动净收益', false, false);
							d.add(222, 20, 'FinancialIndexParams', 'interst_income', '利息费用', false, false);
							d.add(223, 20, 'FinancialIndexParams', 'daa', '折旧与摊销', false, false);
							d.add(224, 20, 'FinancialIndexParams', 'ebit', '息税前利润', false, false);
							d.add(225, 20, 'FinancialIndexParams', 'ebitda', '息税折旧摊销前利润', false, false);
							d.add(226, 20, 'FinancialIndexParams', 'fcff', '企业自由现金流量', false, false);
							d.add(227, 20, 'FinancialIndexParams', 'fcfe', '股权自由现金流量', false, false);
							d.add(228, 20, 'FinancialIndexParams', 'current_exint', '无息流动负债', false, false);
							d.add(229, 20, 'FinancialIndexParams', 'noncurrent_exint', '无息非流动负债', false, false);
							d.add(230, 20, 'FinancialIndexParams', 'interestdebt', '带息债务', false, false);
							d.add(231, 20, 'FinancialIndexParams', 'netdebt', '净债务', false, false);
							d.add(232, 20, 'FinancialIndexParams', 'tangible_asset', '有形资产', false, false);
							d.add(233, 20, 'FinancialIndexParams', 'working_capital', '营运资金', false, false);
							d.add(234, 20, 'FinancialIndexParams', 'networking_capital', '营运流动资本', false, false);
							d.add(235, 20, 'FinancialIndexParams', 'invest_capital', '全部投入资本', false, false);
							d.add(236, 20, 'FinancialIndexParams', 'retained_earnings', '留存收益', false, false);
							d.add(237, 20, 'FinancialIndexParams', 'diluted2_eps', '期末摊薄每股收益', false, false);
							d.add(238, 20, 'FinancialIndexParams', 'bps', '每股净资产', false, false);
							d.add(239, 20, 'FinancialIndexParams', 'ocfps', '每股经营活动产生的现金流量净额', false, false);
							d.add(240, 20, 'FinancialIndexParams', 'retainedps', '每股留存收益', false, false);
							d.add(241, 20, 'FinancialIndexParams', 'cfps', '每股现金流量净额', false, false);
							d.add(242, 20, 'FinancialIndexParams', 'ebit_ps', '每股息税前利润', false, false);
							d.add(243, 20, 'FinancialIndexParams', 'fcff_ps', '每股企业自由现金流量', false, false);
							d.add(244, 20, 'FinancialIndexParams', 'fcfe_ps', '每股股东自由现金流量', false, false);
							d.add(245, 20, 'FinancialIndexParams', 'netprofit_margin', '销售净利率', false, false,true);
							d.add(246, 20, 'FinancialIndexParams', 'grossprofit_margin', '销售毛利率', false, false,true);
							d.add(247, 20, 'FinancialIndexParams', 'cogs_of_sales', '销售成本率', false, false);
							d.add(248, 20, 'FinancialIndexParams', 'expense_of_sales', '销售期间费用率', false, false);
							d.add(249, 20, 'FinancialIndexParams', 'profit_to_gr', '净利润/营业总收入', false, false);
							d.add(250, 20, 'FinancialIndexParams', 'saleexp_to_gr', '销售费用/营业总收入', false, false);
							d.add(251, 20, 'FinancialIndexParams', 'adminexp_of_gr', '管理费用/营业总收入', false, false);
							d.add(252, 20, 'FinancialIndexParams', 'finaexp_of_gr', '财务费用/营业总收入', false, false);
							d.add(253, 20, 'FinancialIndexParams', 'impai_ttm', '资产减值损失/营业总收入', false, false);
							d.add(254, 20, 'FinancialIndexParams', 'gc_of_gr', '营业总成本/营业总收入', false, false);
							d.add(255, 20, 'FinancialIndexParams', 'op_of_gr', '营业利润/营业总收入', false, false);
							d.add(256, 20, 'FinancialIndexParams', 'ebit_of_gr', '息税前利润/营业总收入', false, false);
							d.add(257, 20, 'FinancialIndexParams', 'roe', '净资产收益率', false, false);
							d.add(258, 20, 'FinancialIndexParams', 'roe_waa', '加权平均净资产收益率', false, false);
							d.add(259, 20, 'FinancialIndexParams', 'roe_dt', '净资产收益率(扣除非经常损益)', false, false,true);
							d.add(260, 20, 'FinancialIndexParams', 'roa', '总资产报酬率', false, false);
							d.add(261, 20, 'FinancialIndexParams', 'npta', '总资产净利润', false, false);
							d.add(262, 20, 'FinancialIndexParams', 'roic', '投入资本回报率', false, false);
							d.add(263, 20, 'FinancialIndexParams', 'roe_yearly', '年化净资产收益率', false, false);
							d.add(264, 20, 'FinancialIndexParams', 'roa2_yearly', '年化总资产报酬率', false, false);
							d.add(265, 20, 'FinancialIndexParams', 'roe_avg', '平均净资产收益率(增发条件)', false, false);
							d.add(266, 20, 'FinancialIndexParams', 'opincome_of_ebt', '经营活动净收益/利润总额', false, false);
							d.add(267, 20, 'FinancialIndexParams', 'investincome_of_ebt', '价值变动净收益/利润总额', false, false);
							d.add(268, 20, 'FinancialIndexParams', 'n_op_profit_of_ebt', '营业外收支净额/利润总额', false, false);
							d.add(269, 20, 'FinancialIndexParams', 'tax_to_ebt', '所得税/利润总额', false, false);
							d.add(270, 20, 'FinancialIndexParams', 'dtprofit_to_profit', '扣除非经常损益后的净利润/净利润', false, false);
							d.add(271, 20, 'FinancialIndexParams', 'salescash_to_or', '销售商品提供劳务收到的现金/营业收入', false, false);
							d.add(272, 20, 'FinancialIndexParams', 'ocf_to_or', '经营活动产生的现金流量净额/营业收入', false, false);
							d.add(273, 20, 'FinancialIndexParams', 'ocf_to_opincome', '经营活动产生的现金流量净额/经营活动净收益', false, false);
							d.add(274, 20, 'FinancialIndexParams', 'capitalized_to_da', '资本支出/折旧和摊销', false, false);
							d.add(275, 20, 'FinancialIndexParams', 'debt_to_assets', '资产负债率', false, false);
							d.add(276, 20, 'FinancialIndexParams', 'assets_to_eqt', '权益乘数', false, false);
							d.add(277, 20, 'FinancialIndexParams', 'dp_assets_to_eqt', '权益乘数(杜邦分析)', false, false);
							d.add(278, 20, 'FinancialIndexParams', 'ca_to_assets', '流动资产/总资产', false, false);
							d.add(279, 20, 'FinancialIndexParams', 'nca_to_assets', '非流动资产/总资产', false, false);
							d.add(280, 20, 'FinancialIndexParams', 'tbassets_to_totalassets', '有形资产/总资产', false, false);
							d.add(281, 20, 'FinancialIndexParams', 'int_to_talcap', '带息债务/全部投入资本', false, false);
							d.add(282, 20, 'FinancialIndexParams', 'eqt_to_talcapital', '归属于母公司的股东权益/全部投入资本', false, false);
							d.add(283, 20, 'FinancialIndexParams', 'currentdebt_to_debt', '流动负债/负债合计', false, false);
							d.add(284, 20, 'FinancialIndexParams', 'longdeb_to_debt', '非流动负债/负债合计', false, false);
							d.add(285, 20, 'FinancialIndexParams', 'ocf_to_shortdebt', '经营活动产生的现金流量净额/流动负债', false, false);
							d.add(286, 20, 'FinancialIndexParams', 'debt_to_eqt', '产权比率', false, false);
							d.add(287, 20, 'FinancialIndexParams', 'eqt_to_debt', '归属于母公司的股东权益/负债合计', false, false);
							d.add(288, 20, 'FinancialIndexParams', 'eqt_to_interestdebt', '归属于母公司的股东权益/带息债务', false, false);
							d.add(289, 20, 'FinancialIndexParams', 'tangibleasset_to_debt', '有形资产/负债合计', false, false);
							d.add(290, 20, 'FinancialIndexParams', 'tangasset_to_intdebt', '有形资产/带息债务', false, false);
							d.add(291, 20, 'FinancialIndexParams', 'tangibleasset_to_netdebt', '有形资产/净债务', false, false);
							d.add(292, 20, 'FinancialIndexParams', 'ocf_to_debt', '经营活动产生的现金流量净额/负债合计', false, false);
							d.add(293, 20, 'FinancialIndexParams', 'ocf_to_interestdebt', '经营活动产生的现金流量净额/带息债务', false, false);
							d.add(294, 20, 'FinancialIndexParams', 'ocf_to_netdebt', '经营活动产生的现金流量净额/净债务', false, false);
							d.add(295, 20, 'FinancialIndexParams', 'ebit_to_interest', '已获利息倍数(EBIT/利息费用)', false, false);
							d.add(296, 20, 'FinancialIndexParams', 'longdebt_to_workingcapital', '长期债务与营运资金比率', false, false);
							d.add(297, 20, 'FinancialIndexParams', 'ebitda_to_debt', '息税折旧摊销前利润/负债合计', false, false);
							d.add(298, 20, 'FinancialIndexParams', 'turn_days', '营业周期', false, false);
							d.add(299, 20, 'FinancialIndexParams', 'roa_yearly', '年化总资产净利率', false, false);
							d.add(300, 20, 'FinancialIndexParams', 'roa_dp', '总资产净利率(杜邦分析)', false, false);
							d.add(301, 20, 'FinancialIndexParams', 'fixed_assets', '固定资产合计', false, false);
							d.add(302, 20, 'FinancialIndexParams', 'profit_prefin_exp', '扣除财务费用前营业利润', false, false);
							d.add(303, 20, 'FinancialIndexParams', 'non_op_profit', '非营业利润', false, false);
							d.add(304, 20, 'FinancialIndexParams', 'op_to_ebt', '营业利润／利润总额', false, false);
							d.add(305, 20, 'FinancialIndexParams', 'nop_to_ebt', '非营业利润／利润总额', false, false);
							d.add(306, 20, 'FinancialIndexParams', 'ocf_to_profit', '经营活动产生的现金流量净额／营业利润', false, false);
							d.add(307, 20, 'FinancialIndexParams', 'cash_to_liqdebt', '货币资金／流动负债', false, false);
							d.add(308, 20, 'FinancialIndexParams', 'cash_to_liqdebt_withinterest', '货币资金／带息流动负债', false, false);
							d.add(309, 20, 'FinancialIndexParams', 'op_to_liqdebt', '营业利润／流动负债', false, false);
							d.add(310, 20, 'FinancialIndexParams', 'op_to_debt', '营业利润／负债合计', false, false);
							d.add(311, 20, 'FinancialIndexParams', 'roic_yearly', '年化投入资本回报率', false, false);
							d.add(312, 20, 'FinancialIndexParams', 'total_fa_trun', '固定资产合计周转率', false, false);
							d.add(313, 20, 'FinancialIndexParams', 'profit_to_op', '利润总额／营业收入', false, false);
							d.add(314, 20, 'FinancialIndexParams', 'q_opincome', '经营活动单季度净收益', false, false);
							d.add(315, 20, 'FinancialIndexParams', 'q_investincome', '价值变动单季度净收益', false, false);
							d.add(316, 20, 'FinancialIndexParams', 'q_dtprofit', '扣除非经常损益后的单季度净利润', false, false);
							d.add(317, 20, 'FinancialIndexParams', 'q_eps', '每股收益(单季度)', false, false);
							d.add(318, 20, 'FinancialIndexParams', 'q_netprofit_margin', '销售净利率(单季度)', false, false);
							d.add(319, 20, 'FinancialIndexParams', 'q_gsprofit_margin', '销售毛利率(单季度)', false, false);
							d.add(320, 20, 'FinancialIndexParams', 'q_exp_to_sales', '销售期间费用率(单季度)', false, false);
							d.add(321, 20, 'FinancialIndexParams', 'q_profit_to_gr', '净利润／营业总收入(单季度)', false, false);
							d.add(322, 20, 'FinancialIndexParams', 'q_saleexp_to_gr', '销售费用／营业总收入 (单季度)', false, false);
							d.add(323, 20, 'FinancialIndexParams', 'q_adminexp_to_gr', '管理费用／营业总收入 (单季度)', false, false);
							d.add(324, 20, 'FinancialIndexParams', 'q_finaexp_to_gr', '财务费用／营业总收入 (单季度)', false, false);
							d.add(325, 20, 'FinancialIndexParams', 'q_impair_to_gr_ttm', '资产减值损失／营业总收入(单季度)', false, false);
							d.add(326, 20, 'FinancialIndexParams', 'q_gc_to_gr', '营业总成本／营业总收入 (单季度)', false, false);
							d.add(327, 20, 'FinancialIndexParams', 'q_op_to_gr', '营业利润／营业总收入(单季度)', false, false);
							d.add(328, 20, 'FinancialIndexParams', 'q_roe', '净资产收益率(单季度)', false, false);
							d.add(329, 20, 'FinancialIndexParams', 'q_dt_roe', '净资产单季度收益率(扣除非经常损益)', false, false);
							d.add(330, 20, 'FinancialIndexParams', 'q_npta', '总资产净利润(单季度)', false, false);
							d.add(331, 20, 'FinancialIndexParams', 'q_opincome_to_ebt', '经营活动净收益／利润总额(单季度)', false, false);
							d.add(332, 20, 'FinancialIndexParams', 'q_investincome_to_ebt', '价值变动净收益／利润总额(单季度)', false, false);
							d.add(333, 20, 'FinancialIndexParams', 'q_dtprofit_to_profit', '扣除非经常损益后的净利润／净利润(单季度)', false, false);
							d.add(334, 20, 'FinancialIndexParams', 'q_salescash_to_or', '销售商品提供劳务收到的现金／营业收入(单季度)', false, false);
							d.add(335, 20, 'FinancialIndexParams', 'q_ocf_to_sales', '经营活动产生的现金流量净额／营业收入(单季度)', false, false);
							d.add(336, 20, 'FinancialIndexParams', 'q_ocf_to_or', '经营活动产生的现金流量净额／经营活动净收益(单季度)', false, false);
							d.add(337, 20, 'FinancialIndexParams', 'basic_eps_yoy', '基本每股收益同比增长率(%)', false, false,true);
							d.add(338, 20, 'FinancialIndexParams', 'dt_eps_yoy', '稀释每股收益同比增长率(%)', false, false);
							d.add(339, 20, 'FinancialIndexParams', 'cfps_yoy', '每股经营活动产生的现金流量净额同比增长率(%)', false, false);
							d.add(340, 20, 'FinancialIndexParams', 'op_yoy', '营业利润同比增长率(%)', false, false,true);
							d.add(341, 20, 'FinancialIndexParams', 'ebt_yoy', '利润总额同比增长率(%)', false, false);
							d.add(342, 20, 'FinancialIndexParams', 'netprofit_yoy', '归属母公司股东的净利润同比增长率(%)', false, false,true);
							d.add(343, 20, 'FinancialIndexParams', 'dt_netprofit_yoy', '归属母公司股东的净利润-扣除非经常损益同比增长率(%)', false, false,true);
							d.add(344, 20, 'FinancialIndexParams', 'ocf_yoy', '经营活动产生的现金流量净额同比增长率(%)', false, false);
							d.add(345, 20, 'FinancialIndexParams', 'roe_yoy', '净资产收益率(摊薄)同比增长率(%)', false, false);
							d.add(346, 20, 'FinancialIndexParams', 'bps_yoy', '每股净资产相对年初增长率(%)', false, false);
							d.add(347, 20, 'FinancialIndexParams', 'assets_yoy', '资产总计相对年初增长率(%)', false, false);
							d.add(348, 20, 'FinancialIndexParams', 'eqt_yoy', '归属母公司的股东权益相对年初增长率(%)', false, false);
							d.add(349, 20, 'FinancialIndexParams', 'tr_yoy', '营业总收入同比增长率(%)', false, false,true);
							d.add(350, 20, 'FinancialIndexParams', 'or_yoy', '营业收入同比增长率(%)', false, false,true);
							d.add(351, 20, 'FinancialIndexParams', 'q_gr_yoy', '营业总收入同比增长率(%)(单季度)', false, false);
							d.add(352, 20, 'FinancialIndexParams', 'q_gr_qoq', '营业总收入环比增长率(%)(单季度)', false, false);
							d.add(353, 20, 'FinancialIndexParams', 'q_sales_yoy', '营业收入同比增长率(%)(单季度)', false, false);
							d.add(354, 20, 'FinancialIndexParams', 'q_sales_qoq', '营业收入环比增长率(%)(单季度)', false, false);
							d.add(355, 20, 'FinancialIndexParams', 'q_op_yoy', '营业利润同比增长率(%)(单季度)', false, false);
							d.add(356, 20, 'FinancialIndexParams', 'q_op_qoq', '营业利润环比增长率(%)(单季度)', false, false);
							d.add(357, 20, 'FinancialIndexParams', 'q_profit_yoy', '净利润同比增长率(%)(单季度)', false, false,true);
							d.add(358, 20, 'FinancialIndexParams', 'q_profit_qoq', '净利润环比增长率(%)(单季度)', false, false);
							d.add(359, 20, 'FinancialIndexParams', 'q_netprofit_yoy', '归属母公司股东的净利润同比增长率(%)(单季度)', false, false);
							d.add(360, 20, 'FinancialIndexParams', 'q_netprofit_qoq', '归属母公司股东的净利润环比增长率(%)(单季度)', false, false);
							d.add(361, 20, 'FinancialIndexParams', 'equity_yoy', '净资产同比增长率', false, false,true);
							d.add(362, 20, 'FinancialIndexParams', 'rd_exp', '研发费用', false, false);

							document.write(d);
							d.openAll();

							//Search
							function nodeSearching() {
								var dosearch = $.trim($("#dosearch_text").val());
								var dtree_div = $("#dtree_div").find(".dtree_node").show().filter(":contains('" + dosearch + "')");//»ñÈ¡ËùÓÐ°üº¬ÎÄ±¾µÄ½Úµã
								$.each(dtree_div, function (index, element) {
									var s = $(element).attr("node_id");
									d.openTo(s);
								});
    }
						</script>
					</div>

					<div class="selectorResult">
						Select result:
						<ul id="ulSelected">
						</ul>
					</div>

				</div>
			</div>
			<!-- /opposite sidebar -->

		</div>
		<!-- /page content -->

	</div>
	<!-- /page container -->

	<!-- Chart script  -->
	<script type="text/javascript">
       var indexCodes=[];
       var stockCodes=[];
       var macroParams=[];
       var financialIndexParams=[];
        $(document).ready(function () {
            var time = new Date();
            var day = ("0" + time.getDate()).slice(-2);
            var month = ("0" + (time.getMonth() + 1)).slice(-2);
            var lastYear = time.getFullYear()-1 + "-" + (month) + "-" + (day);
            if(time.getHours()<18)
            {
            	var preDate = new Date(new Date()-24*60*60*1000);
            	day = ("0" + preDate.getDate()).slice(-2);
            	month = ("0" + (preDate.getMonth() + 1)).slice(-2);
                lastYear = preDate.getFullYear()-1 + "-" + (month) + "-" + (day);
            }

            $('#startDate').val(lastYear);

            var today = time.getFullYear() + "-" + (month) + "-" + (day);
            $('#endDate').val(today);
        });

        Array.prototype.indexOf = function(val) {
            for (var i = 0; i < this.length; i++) {
            if (this[i] == val) return i;
            }
        return -1;
        };

        Array.prototype.remove = function(val) {
            var index = this.indexOf(val);
            if (index > -1) {
            this.splice(index, 1);
            }
        };

        function removeCode(obj){
            stockCodes.remove(obj.id);
            $(obj).remove();
	    };

	    function addCode()
	    {
                var stockCode=$("#stockCode").val().trim();
                var stockText=stockCode;
                var isInCodeList=0;
                var $options=$("#stockCodeList").children();
                for(var i=0;i<$options.length;i++){
                    if($options.eq(i).val().trim()==$("#stockCode").val().trim())
                    {
                        stockText=$options.eq(i).text();
                        break;
                    }
                }
                //selectedItem='<dd onClick="removeCode(this)" id="'+ stockCode + '"><a href="#">'+stockText+'</a></dd>';
                //$(".select-result dl").append(selectedItem);
                stockCodes.push(stockCode);
        }

        function removeIndexCode(obj){
            indexCodes.remove(obj.id);
            $(obj).remove();
	    };

	    function addIndexCode()
	    {
                var indexCode=$("#indexCode").val().trim();
                var indexText=indexCode;
                var isInCodeList=0;
                var $options=$("#indexCodeList").children();
                for(var i=0;i<$options.length;i++){
                    if($options.eq(i).val().trim()==$("#indexCode").val().trim())
                    {
                        indexText=$options.eq(i).text();
                        break;
                    }
                }
                selectedItem='<dd onClick="removeIndexCode(this)" id="'+ indexCode + '"><a href="#">'+indexText+'</a></dd>';
                $(".select-result dl").append(selectedItem);
                indexCodes.push(indexCode);
            }

		function getMacroParams()
		{
			var params=[];
			var checkBoxObj = document.all.MacroParams;

			for (i = 0; i < checkBoxObj.length; i++) {
				if (checkBoxObj[i].checked) {
					params.push(checkBoxObj[i].value);
				}
			}
			return params;

		}

	   function getFinancialIndexParams()
		{
			var params=[];
			var checkBoxObj = document.all.FinancialIndexParams;
			for (i = 0; i < checkBoxObj.length; i++) {
				if (checkBoxObj[i].checked) {
					params.push(checkBoxObj[i].value);
				}
			}
			return params;
		}

   </script>

	<script type="module">
	   // import {attachStockData, setXAxisData, calculateMA, splitDataByType, splitData, option} from '/static/js/smartDataCandlesticks.js';
		import * as smartDataCandlesticks from '../static/js/smartDataCandlesticks.js';
		var dom = document.getElementById("candlestick_line");
		var myChart = echarts.init(dom);
		var app = {};
		var option = smartDataCandlesticks.option;
		// var upColor = '#66BB6A';
		// var downColor = '#FF7043';
		// var upColorBorder = upColor;
		// var downColorBorder = downColor;

		var codeData = smartDataCandlesticks.splitDataByType({{ stockData|safe }},false);
		var tradingCalendar = {{ TradingCalendar|safe }}
		var macds = {{ macds|safe }}
		smartDataCandlesticks.setXAxisData(option, tradingCalendar, 0);
		smartDataCandlesticks.setXAxisData(option, tradingCalendar, 1);
		smartDataCandlesticks.setXAxisData(option, tradingCalendar, 2);
		smartDataCandlesticks.attachStockData(option, "上证指数", codeData);
        smartDataCandlesticks.attachMacdData(option, macds);
		myChart.setOption(option, true);

		myChart.dispatchAction({
			type: 'brush',
			areas: [
				{
					brushType: 'lineX',
					coordRange: ['2018-06-02', '2018-07-20'],
					xAxisIndex: 0
				}
			]
		});

		////////////////////////////////////////////////////////////////////////////////////
		if (option && typeof option === "object") {
			myChart.setOption(option, true);
		}


		 var stockData;
		$('#analyse').click(function () {
			var reg = new RegExp("-","g");
			var startDate= $('#startDate').val().replace(reg,"");
			var endDate= $('#endDate').val().replace(reg,"");
			macroParams = getMacroParams();
			financialIndexParams = getFinancialIndexParams();
			$.ajax({
					url: '',
					type: 'post',
					traditional: true,
					data: {'indexCodes': indexCodes,'stockCodes': stockCodes,'startDate': startDate, 'endDate': endDate, 'macroParams': macroParams, 'financialIndexParams':financialIndexParams},
					success: function (response)
					{
						var numOfCodes = (response.indexCodes.length + response.stockCodes.length);
						var isMultiCodes = (numOfCodes>1);
						var haveBasicData = false;
						//console.log(response.tradingCalendarData);
						smartDataCandlesticks.setXAxisData(option, response.tradingCalendarData);

						smartDataCandlesticks.resetSeriesData(option);//Çå¿ÕÊý¾Ý
						///////////////////// attach index data ////////////////////////////////////////////
						if(isMultiCodes)
						{
							option.yAxis[0].axisLabel.formatter='{value} %';
						}
						else
						{
							option.yAxis[0].axisLabel.formatter='{value}';
						}

						for(var index=0; index < response.indexCodes.length; index++)
						{
							var indexCode = response.indexCodes[index];
							var codeData = smartDataCandlesticks.splitDataByType(response.indexTradingDatas[indexCode], isMultiCodes);
							 if(isMultiCodes)
							 {  //Èç¹ûÓÐ(¹ÉÆ±+Ö¸Êý)ÓÐ¶à¸ö£¬Ôò²»ÓÃÀ¯ÖòÍ¼£¬¶øÓÃÆÕÍ¨µÄÕÛÏß»­
								smartDataCandlesticks.attachLineDataOnFirstAxis(option, indexCode, codeData.values);
							 }
							 else
							 {
								//Èç¹ûÖ»ÓÐÒ»¸ö¹ÉÆ±ºÍÖ¸ÊýÏà¼ÓÖ»ÓÐÒ»¸ö£¬ÔòÓÃÀ¯ÖòÍ¼
								smartDataCandlesticks.attachStockData(option, indexCode, codeData);
							 }
						}
						 ///////////////////// attach stock data ////////////////////////////////////////////
						for(var index=0; index < response.stockCodes.length; index++)
						{
							var stockCode = response.stockCodes[index];
							var codeData=smartDataCandlesticks.splitDataByType(response.tradingDatas[stockCode], isMultiCodes);
							if(isMultiCodes)
							{
								smartDataCandlesticks.attachLineDataOnFirstAxis(option, stockCode, codeData.values);
							 }
							 else
							 {
								smartDataCandlesticks.attachStockData(option, stockCode, codeData);
							 }
						}

						smartDataCandlesticks.attachMacdData(option, response.macds);

						///////////////////// attach macro data ////////////////////////////////////////////
						for(var macroDataIndex=0; macroDataIndex < response.macroParams.length; macroDataIndex++)
						{
							var macroDataType = response.macroParams[macroDataIndex];
							smartDataCandlesticks.createNewYAxisAndAttachLineData(option, macroDataType, response.tradingCalendarData, response.macroDatas[macroDataType], (response.macroParams.length<2));
						}

						///////////////////// attach financial Index data ////////////////////////////////////////////
						for(var index=0; index < response.financialIndexParams.length; index++)
						{
							var financialIndexParam = response.financialIndexParams[index];
							var datas = [];
							for(var i=0; i < response.financialIndexDatas.length; i++)
							{
								datas.push([response.financialIndexDatas[i][0],response.financialIndexDatas[i][index+2]]);
							}

							smartDataCandlesticks.createNewYAxisAndAttachLineData(option, financialIndexParam, response.tradingCalendarData, datas, true);
						}


						myChart.setOption(option, true);
					}
			})
		})

		//窗口自动缩放
		window.addEventListener('resize',function () {
		if(myChart){myChart.resize();}})
	</script>
    <!-- /Chart script  -->

</body>
</html>
